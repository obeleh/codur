fix the bug in software, I think there is an off-by-one error in the code.